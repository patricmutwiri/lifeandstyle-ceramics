!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var n=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(e,n,t,r,a,i){i.latencyThreshold;return{request:function(e){return e},response:function(e){return e&&e.config||a.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e},responseError:function(n){return n&&n.config||a.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e.reject(n)}}}];e.interceptors.push(n)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,n,t,r){var a,i,o,c=this.parentSelector,l=angular.element(this.loadingBarTemplate),s=l.find("div").eq(0),d=angular.element(this.spinnerTemplate),u=!1,p=0,h=this.autoIncrement,g=this.includeSpinner,f=this.includeBar,m=this.startSize;function v(e){if(u){var n=100*e+"%";s.css("width",n),p=e,h&&(t.cancel(i),i=t(function(){B()},250))}}function B(){if(!(S()>=1)){var e=0,n=S();e=n>=0&&n<.25?(3*Math.random()+3)/100:n>=.25&&n<.65?3*Math.random()/100:n>=.65&&n<.9?2*Math.random()/100:n>=.9&&n<.99?.005:0,v(S()+e)}}function S(){return p}function $(){p=0,u=!1}return{start:function(){if(a||(a=e.get("$animate")),t.cancel(o),!u){var i=n[0],s=i.querySelector?i.querySelector(c):n.find(c)[0];s||(s=i.getElementsByTagName("body")[0]);var p=angular.element(s),h=s.lastChild&&angular.element(s.lastChild);r.$broadcast("cfpLoadingBar:started"),u=!0,f&&a.enter(l,p,h),g&&a.enter(d,p,l),v(m)}},set:v,status:S,inc:B,complete:function(){a||(a=e.get("$animate")),v(1),t.cancel(o),o=t(function(){var e=a.leave(l,$);e&&e.then&&e.then($),a.leave(d),r.$broadcast("cfpLoadingBar:completed")},500)},autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();